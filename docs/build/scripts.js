/* Author: Artem Sapegin, http://sapegin.me, 2017 */

!function(e){"function"==typeof define&&define.amd?define([],e):e()}(function(){"use strict";function e(e){a=0,i=[];for(var t=0;t<s.length;t++)e=e.replace(s[t],function(e){return i[a]=e,"↑"+a+++"↓"});return e}function t(e){return e=e.replace(u,function(e,t){return i[t]}),a=0,i=[],e}function n(n){n=e(n);for(var r=0;r<o.length;r++){var i=o[r];n=n.replace(i[0],i[1])}return n=t(n),n=n.replace(/\=("[^\"]*")/g,"←=→←str:$1→")}function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/←([^:→]+)→/g,"←gray:$1→").replace(/←(\w+):([^→]+)→/g,'<span class="hl-$1">$2</span>')}var i,a,o=[[/<(\/?)([\w]+)([^>]*)>/g,"←<$1→←tag:$2→$3←>→"],[/ ([\-\w]+)/g," ←attr:$1→"]],s=[/"([^"]+)"/gm],u=/↑(\d+)↓/g;return window.htmlhl=function(e){return r(n(e))}}),function(){function o(){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;return function(n){return n?n.toString().replace(t,function(t){return e[t]||t}):n}}function p(b,a,f){return("string"==typeof a?a:a.toString()).replace(b.define||h,function(g,e,c,i){return 0===e.indexOf("def.")&&(e=e.substring(4)),e in f||(":"===c?f[e]=i:eval("def['"+e+"']="+i)),""}).replace(b.use||h,function(g,e){var c=eval(e);return c?p(b,c,f):c})}function l(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var j={version:"0.2.0",templateSettings:{evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0},m=function(){return this||(0,eval)("this")}();"undefined"!=typeof module&&module.exports?module.exports=j:"function"==typeof define&&define.amd?define(function(){return j}):m.doT=j,m.encodeHTML=o();var q={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},h=/$^/;j.template=function(e,t,n){var r,i,a=(t=t||j.templateSettings).append?q.append:q.split,s=0;if(t.use||t.define){var u=m.def;m.def=n||{},e=p(t,e,m.def),m.def=u}e=("var out='"+(t.strip?e.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):e).replace(/'|\\/g,"\\$&").replace(t.interpolate||h,function(e,t){return a.start+l(t)+a.end}).replace(t.encode||h,function(e,t){return r=!0,a.startencode+l(t)+a.end}).replace(t.conditional||h,function(e,t,n){return t?n?"';}else if("+l(n)+"){out+='":"';}else{out+='":n?"';if("+l(n)+"){out+='":"';}out+='"}).replace(t.iterate||h,function(e,t,n,r){return t?(s+=1,i=r||"i"+s,t=l(t),"';var arr"+s+"="+t+";if(arr"+s+"){var "+n+","+i+"=-1,l"+s+"=arr"+s+".length-1;while("+i+"<l"+s+"){"+n+"=arr"+s+"["+i+"+=1];out+='"):"';} } out+='"}).replace(t.evaluate||h,function(e,t){return"';"+l(t)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|}|^|{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|}|^|{)out\+=''\+/g,"$1out+="),r&&t.selfcontained&&(e="var encodeHTML=("+o.toString()+"());"+e);try{return new Function(t.varname,e)}catch(t){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+e),t}},j.compile=function(e,t){return j.template(e,null,t)}}(),this.JSON||(this.JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,a,o,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(u)){for(a=u.length,n=0;n<a;n+=1)o[n]=str(n,u)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof(r=rep[n])&&(i=str(r,u))&&o.push(quote(r)+(gap?": ":":")+i);else for(r in u)Object.hasOwnProperty.call(u,r)&&(i=str(r,u))&&o.push(quote(r)+(gap?": ":":")+i);return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){function e(e){return function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(n),l.appendChild(n),n.addBehavior("#default#userData"),n.load(o);var i=e.apply(r,t);return l.removeChild(n),i}}function t(e){return e.replace(f,"___")}var n,r={},i=window,a=i.document,o="localStorage",s="globalStorage",u="__storejs__";if(r.disabled=!1,r.set=function(e,t){},r.get=function(e){},r.remove=function(e){},r.clear=function(){},r.transact=function(e,t,n){var i=r.get(e);null==n&&(n=t,t=null),void 0===i&&(i=t||{}),n(i),r.set(e,i)},r.getAll=function(){},r.serialize=function(e){return JSON.stringify(e)},r.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return o in i&&i[o]}catch(e){return!1}}())n=i[o],r.set=function(e,t){return void 0===t?r.remove(e):(n.setItem(e,r.serialize(t)),t)},r.get=function(e){return r.deserialize(n.getItem(e))},r.remove=function(e){n.removeItem(e)},r.clear=function(){n.clear()},r.getAll=function(){for(var e={},t=0;t<n.length;++t){var i=n.key(t);e[i]=r.get(i)}return e};else if(function(){try{return s in i&&i[s]&&i[s][i.location.hostname]}catch(e){return!1}}())n=i[s][i.location.hostname],r.set=function(e,t){return void 0===t?r.remove(e):(n[e]=r.serialize(t),t)},r.get=function(e){return r.deserialize(n[e]&&n[e].value)},r.remove=function(e){delete n[e]},r.clear=function(){for(var e in n)delete n[e]},r.getAll=function(){for(var e={},t=0;t<n.length;++t){var i=n.key(t);e[i]=r.get(i)}return e};else if(a.documentElement.addBehavior){var l,c;try{(c=new ActiveXObject("htmlfile")).open(),c.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),c.close(),l=c.w.frames[0].document,n=l.createElement("div")}catch(e){n=a.createElement("div"),l=a.body}var f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");r.set=e(function(e,n,i){return n=t(n),void 0===i?r.remove(n):(e.setAttribute(n,r.serialize(i)),e.save(o),i)}),r.get=e(function(e,n){return n=t(n),r.deserialize(e.getAttribute(n))}),r.remove=e(function(e,n){n=t(n),e.removeAttribute(n),e.save(o)}),r.clear=e(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(o);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(o)}),r.getAll=e(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(o);for(var n,i={},a=0;n=t[a];++a)i[n]=r.get(n);return i})}try{r.set(u,u),r.get(u)!=u&&(r.disabled=!0),r.remove(u)}catch(e){r.disabled=!0}r.enabled=!r.disabled,"undefined"!=typeof module&&"function"!=typeof module?module.exports=r:"function"==typeof define&&define.amd?define(r):this.store=r}(),function(e){"use strict";e.Transitions={_names:{transition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend"},_parseTimes:function(e){for(var t,n=e.split(/,\s*/),r=0;r<n.length;r++)t=n[r],n[r]=parseFloat(t),t.match(/\ds/)&&(n[r]=1e3*n[r]);return n},getEvent:function(){var e=!1;for(var t in this._names)if(void 0!==document.body.style[t]){e=this._names[t];break}return this.getEvent=function(){return e},e},animFrame:function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;return this.animFrame=t?function(e){return t.call(window,e)}:function(e){return setTimeout(e,10)},this.animFrame(e)},isSupported:function(){return!1!==this.getEvent()}},e.extend(e.fn,{afterTransition:function(t,n){if(void 0===n&&(n=t,t=1),!e.Transitions.isSupported()){for(r=0;r<this.length;r++)n.call(this[r],{type:"aftertransition",elapsedTime:0,propertyName:"",currentTarget:this[r]});return this}for(var r=0;r<this.length;r++){var i=e(this[r]),a=i.css("transition-property").split(/,\s*/),o=i.css("transition-duration"),s=i.css("transition-delay");o=e.Transitions._parseTimes(o),s=e.Transitions._parseTimes(s);for(var u,l,c=0;c<a.length;c++)u=a[c],l=o[1==o.length?0:c],function(t,r,i,a){setTimeout(function(){e.Transitions.animFrame(function(){n.call(t[0],{type:"aftertransition",elapsedTime:a,propertyName:r,currentTarget:t[0]})})},i)}(i,u,s[1==s.length?0:c]+l*t,l*t/1e3)}return this},transitionEnd:function(t){for(var n=0;n<this.length;n++)this[n].addEventListener(e.Transitions.getEvent(),function(e){t.call(this,e)});return this}})}.call(this,jQuery),void 0===window.DEBUG&&(window.DEBUG=!0),function(e,t,n,r){"use strict";function i(e){return(e||document).querySelectorAll("[data-component]")}if(document.querySelectorAll){var a,o=e.tamia={},s={};if(o.initComponents=function(e,n){var r;void 0===n?r=a||(a=i()):(r=i(n),e=s);for(var o=0,u=r.length;o<u;o++){var l=r[o],c=l.getAttribute("data-component"),f=e[c];if(f&&!l.hasAttribute("_tamia-yep")){var p=!0;if("__tamia_cmpnt__"in f)p=new f(l).initializable;else if("function"==typeof f)p=f(l);else if(t)for(var d in f){var g=f[d],m=t(l);t.isArray(g)?m[d].apply(m,g):m[d](g)}!1!==p&&l.setAttribute("_tamia-yep","yes")}}for(var v in e)s[v]=e[v]},t){var u=t(document);o.registerEvents=function(e){var t=$.map(e,l).join(" ");u.on(t,function(t){e[t.type](t.target)})};var l=function(e,t){return t+".tamia"},c={};c.init=function(e){o.initComponents(void 0,e)},c.appear=function(e){if(e=$(e),n&&n.csstransitions){if(e.hasClass("is-transit")&&!e.hasClass("is-hidden"))return;e.addClass("is-transit"),setTimeout(function(){e.removeClass("is-hidden"),e.afterTransition(function(){e.removeClass("is-transit"),e.trigger("appeared.tamia")})},0)}else e.removeClass("is-hidden"),e.trigger("appeared.tamia")},c.disappear=function(e){if(e=$(e),n&&n.csstransitions){if(e.hasClass("is-transit")&&e.hasClass("is-hidden"))return;e.addClass("is-transit"),e.addClass("is-hidden"),e.afterTransition(function(){e.removeClass("is-transit"),e.trigger("disappeared.tamia")})}else e.addClass("is-hidden"),e.trigger("disappeared.tamia")},c.toggle=function(e){(e=$(e)).hasClass("is-hidden")?c.appear(e):c.disappear(e)},o.registerEvents(c),u.on("click","[data-fire]",function(e){var n=t(e.currentTarget),r=n.data(),i=r.target&&t(r.target)||n.closest(r.closest),a=r.attrs;i.trigger(r.fire,a?a.split(/[;, ]/):void 0),e.preventDefault()})}}}(window,window.jQuery,window.Modernizr),function(e){"use strict";function t(e,t){return t=t||100,function(){e.debouncing||(e.debouncing=!0),clearTimeout(e.debounceTimeout);var n=Array.prototype.slice.apply(arguments);return e.debounceTimeout=setTimeout(function(){e.lastReturnVal=e.apply(window,n),e.debouncing=!1},t),e.lastReturnVal}}function n(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function r(e){for(var t=["url","title","twitter_via","twitter_related","pinterest_media"],r=0;r<t.length;r++){var i=t[r];e[i]=n(e[i])}return e}function i(e,t){jQuery.each(t,function(t,n){var r=e.find('[name="'+t+'"]');switch(r.attr("type")){case"checkbox":r.prop("checked",!!n);break;case"radio":r.filter('[value="'+n+'"]').prop("checked",!0);break;default:r.val(n)}})}function a(e){return e.replace(/\n[\n\t]*\n/g,"\n").replace(/ {2,}/g," ")}function o(e){return htmlhl(e.replace(/\\\//g,"/"))}e.extend(doT.templateSettings,{strip:!1,varname:"$"});var s=e("html").attr("lang"),u=["flat","classic","birman"],l="classic",c="#ponies"===location.hash;e.fn.serializeObject=function(){var t={},n=this.serializeArray();return e.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},tamia.initComponents({builder:function(n){function f(){var e=d.serialize();if(e!==p){var t=r(d.serializeObject());t.experimental=c,v.toggleClass("is-hidden","1"!==t.site_twitter),h.toggleClass("is-hidden","1"!==t.site_pinterest),y.toggleClass("is-hidden","flat"!==t.skin);var n=a(w(t));m.html(o(b(t)+n)),_(n,t),p=e}}var p,d=e(n),g=e(".js-preview"),m=e(".js-code"),v=d.find(".js-twitter-extra"),h=d.find(".js-pinterest-extra"),y=d.find(".js-light"),b=doT.template(e("#prepend_tmpl").html()),w=doT.template(e("#build_tmpl").html()),_=t(function(t,n){l=n.skin,e.each(u,function(t,n){e("#styles_"+n).prop("disabled",n!==l)}),g.attr("class",g.attr("class").replace(/(preview_)\w+/,"$1"+n.type)),g.html(t),g.find(".social-likes").socialLikes(),d.find(".js-experimental").toggleClass("is-hidden",!c),store.set(s,{skin:l,type:n.type,counters:!!n.counters,light:!!n.light,title:n.title,url:n.url,site_facebook:!!n.site_facebook,site_mailru:!!n.site_mailru,site_odnoklassniki:!!n.site_odnoklassniki,site_plusone:!!n.site_plusone,site_twitter:!!n.site_twitter,site_pinterest:!!n.site_pinterest,site_vkontakte:!!n.site_vkontakte,twitter_related:n.twitter_related,twitter_via:n.twitter_via,pinterest_media:n.pinterest_media})});!function(){var e=store.get(s);e&&i(d,e)}(),d.on("change input","input",f),f(),d.submit(function(){return!1})}})}(jQuery);